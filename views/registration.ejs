<!DOCTYPE html>
<html lang="en">

<head>
    <%- include includes/meta.ejs  %>
    <title>
        <%= pageTitle %>
    </title>
</head>

<body>
    <%- include includes/header.ejs  %>

    <main class="regisration-page">
        <% if(regSuccess){ %>

            <div class="reg-success-flash">
                <h2>Registration Successful!</h2>
                <h3>Redirecting in <span id="timer"></span> Or Click <a href="/">HERE</a></h3>

                <script type="text/javascript">

                    let countTo= 10;
                    const timer= setInterval(function(){

                        document.getElementById("timer").textContent= countTo + "...";
                        countTo--;

                        if (countTo == 0){
                            clearInterval(timer);
                            window.location.href= 'http://localhost:3000/';
                        }

                    },1000);
                </script>
            </div>

        <% }else{ %>
        <div class="page-title-box">
            <h1 class="page-title-box--heading-primary">
                Join NSU ACM SIGAPP SC and be a part of the progress!
            </h1>

            <h2 class="page-title-box--heading-secondary">
                NSU ACM SIGAPP SC is a growing community of computer enthusiasts,<br>
                start your journey by registering below
            </h2>

            <div class="underline"></div>
        </div>

        <div class="registration-box">


            <form class="registration-box-form" id="registration-box-form" action="/register" method="POST">
                <div class="registration-box-form--input-paral">
                    <div class="icon-input-box">
                        <i class="fas fa-user"></i>
                        <input type="text" name="first_name" placeholder="First Name">
                    </div>

                    <div class="icon-input-box">
                        <i class="fas fa-user"></i>
                        <input type="text" name="last_name" placeholder="Last Name">
                    </div>
                </div>

                <% if(error){ %>
                <% if(errorMsg.invalidName){ %>
                <h4 class="error-flash">*Invalid Name!</h4>
                <% } %>
                <% } %>

                <div class="icon-input-box">
                    <i class="fas fa-hashtag"></i>
                    <input type="text" name="user_name" placeholder="Username">
                </div>

                <% if(error){ %>
                <% if(errorMsg.userNameExists){ %>
                <h4 class="error-flash">*Username Exists!</h4>
                <% }else if(errorMsg.invalidUserName){ %>
                <h4 class="error-flash">*Invalid Username!</h4>
                <% } %>
                <% }%>


                <div class="icon-input-box">
                    <i class="fas fa-id-badge"></i>
                    <input type="text" name="nsu_id" placeholder="NSU ID">
                </div>

                <% if(error){ %>
                <% if(errorMsg.nsuIdExists){ %>
                <h4 class="error-flash">*ID already Exists!</h4>
                <% }else if(errorMsg.invalidNsuId){ %>
                <h4 class="error-flash">*Invalid NSU ID!</h4>
                <% } %>
                <% }%>

                <div class="registration-box-form--input-paral">
                    <div class="icon-input-box">
                        <i class="fas fa-envelope"></i>
                        <input id="nsuMail" type="email" name="nsu_email" placeholder="NSU Email">
                    </div>

                    <div class="icon-input-box">
                        <i class="fas fa-envelope"></i>
                        <input type="email" name="alt_email" placeholder="Alternate Email">
                    </div>
                </div>

                <% if(error){ %>
                <% if(errorMsg.emailExists){ %>
                <h4 class="error-flash">*Email already in use!</h4>
                <% }else if(errorMsg.invalidNsuEmail || errorMsg.invalidAltEmail){ %>
                <h4 class="error-flash">*Invalid Email!</h4>
                <% } %>
                <% }%>

                <div class="registration-box-form--input-paral">
                    <div class="icon-input-box">
                        <i class="fas fa-user-secret"></i>
                        <input id="password" type="password" name="password" placeholder="Password">
                    </div>

                    <div class="icon-input-box">
                        <i class="fas fa-user-secret"></i>
                        <input id="re_password" type="password" name="re_password" placeholder="Re-Password">
                    </div>
                </div>

                <% if(error){ %>
                <% if(errorMsg.passwdMisMatch){ %>
                <h4 class="error-flash">*Passwords do not match!</h4>
                <% }else if(errorMsg.invalidPasswd){ %>
                <h4 class="error-flash">*Invalid Password!</h4>
                <% } %>
                <% }%>

                <input id="registerBtn" type="submit" value="Register" class="full-width-btn full-width-btn--black">

            </form>

        </div>
        <% } %>
    </main>

    <script src="js/listners.js"></script>
</body>

</html>